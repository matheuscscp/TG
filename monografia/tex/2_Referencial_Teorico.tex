\begin{definition}
    Seja o conjunto infinito e enumerável $\mathcal{P} = \{a,b,...,a_1,a_2,...,b_1,b_2,...\}$. Dizemos que $\mathcal{P}$ é o conjunto dos \emph{símbolos proposicionais}.
\end{definition}

\begin{definition}
    Se $\phi \in \mathcal{P}$, então $\phi$ é uma \emph{fórmula bem-formada}, ou, simplesmente, uma \emph{fórmula}. Além disso, se $\phi_1,...,\phi_n$ são fórmulas quaisquer, onde $n \in \mathbb{N} \cup \{0\}$, e $\phi$ é de uma das formas a seguir, então $\phi$ também é uma fórmula.
    \begin{enumerate}
        \item \emph{Negação}: $\neg \phi_1$
        \item \emph{Conjunção}: $\phi_1 \wedge ... \wedge \phi_n$
        \item \emph{Disjunção}: $\phi_1 \vee ... \vee \phi_n$
        \item \emph{Implicação}: $\phi_1 \rightarrow \phi_2$
        \item \emph{Equivalência}: $\phi_1 \leftrightarrow \phi_2$
    \end{enumerate}
    Em todos os casos, dizemos que $\phi_i$ é \emph{subfórmula imediata} de $\phi$.
    
    Denotamos a conjunção vazia, $\phi_1 \wedge ... \wedge \phi_n$ com $n=0$, por $\top$, a disjunção vazia por $\bot$ e o conjunto das fórmulas por $\mathcal{L}$.
\end{definition}

\begin{example}
	São fórmulas:
	\begin{itemize}
		\item $\phi = (p \rightarrow q) \rightarrow \neg s$
		\item $\psi = (p \vee q) \leftrightarrow (r \wedge s)$
		\item $\xi  = \neg(p \rightarrow q)$
	\end{itemize}
	Note que $p \rightarrow q$ é subfórmula imediata de $\phi$ e de $\xi$.
\end{example}

\begin{definition}
    Dizemos que $\phi$ é \emph{subfórmula} de $\psi$, escrito $\phi \sqsubseteq \psi$, se, e somente se, alguma das possibilidades ocorre:
    \begin{enumerate}
    	\item $\phi = \psi$.
    	\item $\phi$ é subfórmula imediata de $\psi$.
    	\item $\phi$ é subfórmula de $\xi$ e $\xi$ é subfórmula imediata de $\psi$.
    \end{enumerate}
    
    Se $\phi \sqsubseteq \psi$ e $\phi \neq \psi$, então dizemos que $\phi$ é \emph{subfórmula própria} de $\psi$ e escrevemos $\phi \sqsubset \psi$.
\end{definition}

\begin{example}
    Considere a fórmula $\phi = \neg((p \vee (q \wedge r \wedge s)) \leftrightarrow (q \rightarrow \neg s))$. Note que:
    \begin{itemize}
        \item A única subfórmula imediata de $\phi$ é $\phi_1 = (p \vee (q \wedge r \wedge s)) \leftrightarrow (q \rightarrow \neg s)$.
        \item São subfórmulas de $\phi$: $p$, $q$, $r$, $s$, $\neg s$, $q \wedge r \wedge s$, $q \rightarrow \neg s$, $p \vee (q \wedge r \wedge s)$, $\phi_1$ e $\phi$.
        \item Somente $\phi$ não é subfórmula própria de $\phi$.
    \end{itemize}
\end{example}

\begin{definition}
	Seja $\phi$ uma fórmula. Definimos $tam(\phi)$, o \emph{tamanho} de $\phi$, como o seguinte número:
	\begin{enumerate}
		\item Se $\phi \in \mathcal{P}$, então $tam(\phi) = 1$.
		\item $tam(\neg \phi) = 1 + tam(\phi)$.
		\item $tam(\phi_1 \wedge ... \wedge \phi_n) = tam(\phi_1 \vee ... \vee \phi_n) = n - 1 + \sum_i tam(\phi_i)$.
		\item $tam(\phi_1 \rightarrow \phi_2) = tam(\phi_1 \leftrightarrow \phi_2) = 1 + tam(\phi_1) + tam(\phi_2)$.
		\item $tam(\top) = tam(\bot) = 1$.
	\end{enumerate}
\end{definition}

\begin{example}
	Seja $\phi = p \rightarrow (\neg r \vee (q \leftrightarrow s))$. Então
	\begin{equation*}
	\begin{split}
	tam(\phi) & = 1 + tam(p) + tam(\neg r \vee (q \leftrightarrow s))\\
	& = 1 + 1 + (1 + tam(\neg r) + tam(q \leftrightarrow s))\\
	& = 1 + 1 + (1 + (1 + tam(r)) + (1 + tam(q) + tam(s)))\\
	& = 1 + 1 + (1 + (1 + 1) + (1 + 1 + 1))\\
	& = 8\\
	\end{split}
	\end{equation*}
\end{example}

\begin{definition}
	Dizemos que $\mathbb{v}_0$ é uma \emph{valoração booleana} se $\mathbb{v}_0$ é uma função tal que $\mathbb{v}_0 : \mathcal{P} \longmapsto \{V,F\}$.
    
    Seja $\mathbb{v}_0$ uma valoração booleana. Dizemos que $\mathbb{v}$ é \emph{interpretação} se $\mathbb{v}$ é uma função tal que $\mathbb{v} : \mathcal{L} \longmapsto \{V,F\}$ e:
    \begin{enumerate}
        \item Se $\phi_1 \in \mathcal{P}$, então $\mathbb{v}(\phi_1) = \mathbb{v}_0(\phi_1)$.
        \item $\mathbb{v}(\neg \phi_1) = V$ se, e somente se, $\mathbb{v}(\phi_1) = F$.
        \item $\mathbb{v}(\phi_1 \wedge ... \wedge \phi_n) = V$ se, e somente se, $\mathbb{v}(\phi_i) = V$, para todo $i$.
        \item $\mathbb{v}(\phi_1 \vee ... \vee \phi_n) = V$ se, e somente se, $\mathbb{v}(\phi_i) = V$, para algum $i$.
        \item $\mathbb{v}(\phi_1 \rightarrow \phi_2) = V$ se, e somente se, $\mathbb{v}(\phi_1) = F$ ou $\mathbb{v}(\phi_2) = V$.
        \item $\mathbb{v}(\phi_1 \leftrightarrow \phi_2) = V$ se, e somente se, $\mathbb{v}(\phi_1) = \mathbb{v}(\phi_2)$.
        \item $\mathbb{v}(\top) = V$.
        \item $\mathbb{v}(\bot) = F$.
    \end{enumerate}
    
    Dizemos que a interpretação $\mathbb{v}$ é um \emph{modelo} para $\phi$ se, e somente se, $\mathbb{v}(\phi) = V$.
\end{definition}

\begin{example}
    Seja a interpretação $\mathbb{v}$ definida por $\mathbb{v}_0 = \{(p,V),(q,F),(r,V),(s,V)\}$ e considere a fórmula $\phi = \neg((p \vee (q \wedge r \wedge s)) \leftrightarrow (q \rightarrow \neg s))$. Temos que:
    \begin{itemize}
        \item $\mathbb{v}(q \wedge r \wedge s) = F$
        \item $\mathbb{v}(p \vee (q \wedge r \wedge s)) = V$
        \item $\mathbb{v}(\neg s) = F$
        \item $\mathbb{v}(q \rightarrow \neg s) = V$
        \item $\mathbb{v}((p \vee (q \wedge r \wedge s)) \leftrightarrow (q \rightarrow \neg s)) = V$
        \item $\mathbb{v}(\phi) = F$
    \end{itemize}
    Logo, $\mathbb{v}$ não é um modelo para $\phi$.
\end{example}

\begin{definition}
	Se existe uma interpretação $\mathbb{v}$ tal que $\mathbb{v}(\phi) = V$, então dizemos que $\mathbb{v}$ \emph{satisfaz} $\phi$, ou ainda que $\phi$ é \emph{satisfatível}. De maneira análoga, se $\mathbb{v}$ é tal que $\mathbb{v}(\phi) = F$, então dizemos que $\mathbb{v}$ \emph{falsifica} $\phi$, ou ainda que $\phi$ é \emph{falsificável}.
	
	Se toda interpretação satisfaz $\phi$, então dizemos que $\phi$ é uma \emph{tautologia}. Por outro lado, se toda interpretação falsifica $\phi$, então dizemos que $\phi$ é uma \emph{contradição}, ou que $\phi$ é \emph{insatisfatível}.
	
	Se $\phi$ é simultaneamente satisfatível e falsificável, então dizemos que $\phi$ é uma \emph{contingência}.
\end{definition}

\begin{example}
    São tautologias:
    \begin{itemize}
        \item $\phi \vee \neg \phi$
        \item $\phi \rightarrow \phi$
        \item $\phi \leftrightarrow \phi$
        \item $\top$
    \end{itemize}
    São contradições:
    \begin{itemize}
        \item $\phi \wedge \neg \phi$
        \item $\phi \leftrightarrow \neg \phi$
        \item $\bot$
    \end{itemize}
    São contingências:
    \begin{itemize}
    	\item $p$
    	\item $\neg p$
    	\item $p \wedge q$
    	\item $p \vee q$
    	\item $p \rightarrow q$
    	\item $p \leftrightarrow q$
    \end{itemize}
\end{example}

\begin{definition}
	Uma \emph{posição} é uma sequência finita de números naturais. Usaremos as notações alternativas $\varepsilon$, para a posição vazia $()$, e $a_1.\cdots.a_n$, para a posição $(a_1,\cdots,a_n)$, onde $n \in \mathbb{N} \cup \{0\}$. Além disso, se $\pi = a_1.\cdots.a_n$ é uma posição e $i$ é um número natural, então $i.\pi$ denota a posição $i.a_1.\cdots.a_n$ e $\pi.i$ denota a posição $a_1.\cdots.a_n.i$.
	
    Definimos o \emph{conjunto de posições} de uma fórmula $\phi$, $pos(\phi)$, da seguinte maneira:
    \begin{enumerate}
        \item Se $\phi \in \mathcal{P}$, então $pos(\phi) = \{\varepsilon\}$.
        \item Se $\phi$ é da forma $\neg \phi_1$, $\phi_1 \wedge ... \wedge \phi_n$, $\phi_1 \vee ... \vee \phi_n$, $\phi_1 \rightarrow \phi_2$, ou $\phi_1 \leftrightarrow \phi_2$, então $$pos(\phi) = \{\varepsilon\} \cup \left(\bigcup_i \; \{i.\pi \mid \pi \in pos(\phi_i)\}\right)$$
    \end{enumerate}
    Agora, definimos a \emph{subfórmula de} $\phi$ \emph{começando na posição} $\pi$, escrito $\phi|_\pi$, da seguinte forma:
    \begin{enumerate}
        \item Se $\pi = \varepsilon$, então $\phi|_\pi = \phi$.
        \item Se $\phi$ é da forma $\neg \phi_1$, $\phi_1 \wedge ... \wedge \phi_n$, $\phi_1 \vee ... \vee \phi_n$, $\phi_1 \rightarrow \phi_2$, ou $\phi_1 \leftrightarrow \phi_2$, e $\pi$ é da forma $i.\pi'$, para algum natural $i$ e alguma posição $\pi' \in pos(\phi_i)$, então $\phi|_\pi = \phi_i|_{\pi'}$.
    \end{enumerate}
\end{definition}

\begin{example}
    Seja $\phi = p \vee (q \wedge \neg r)$. Observe que:
    \begin{equation*}
        \begin{split}
            pos(\neg r) & = \{\varepsilon\} \cup \{1.\pi \mid \pi \in pos(r)\} \\
                        & = \{\varepsilon\} \cup \{1.\pi \mid \pi \in \{\varepsilon\}\} \\
                        & = \{\varepsilon,1\}
        \end{split}
    \end{equation*}
    \begin{equation*}
        \begin{split}
            pos(q \wedge \neg r) & = \{\varepsilon\} \cup \{1.\pi \mid \pi \in pos(q)\} \cup \{2.\pi \mid \pi \in pos(\neg r)\} \\
                                 & = \{\varepsilon\} \cup \{1.\pi \mid \pi \in \{\varepsilon\}\} \cup \{2.\pi \mid \pi \in \{\varepsilon,1\}\} \\
                                 & = \{\varepsilon,1,2,2.1\}
        \end{split}
    \end{equation*}
    \begin{equation*}
        \begin{split}
            pos(\phi) & = \{\varepsilon\} \cup \{1.\pi \mid \pi \in pos(p)\} \cup \{2.\pi \mid \pi \in pos(q \wedge \neg r)\} \\
                      & = \{\varepsilon\} \cup \{1.\pi \mid \pi \in \{\varepsilon\}\} \cup \{2.\pi \mid \pi \in \{\varepsilon,1,2,2.1\}\} \\
                      & = \{\varepsilon,1,2,2.1,2.2,2.2.1\}
        \end{split}
    \end{equation*}
    Além disso, note que:
    \begin{itemize}
        \item $\phi|_{\varepsilon} = \phi = p \vee (q \wedge \neg r)$
        \item $\phi|_{1} = p|_{\varepsilon} = p$
        \item $\phi|_{2} = (q \wedge \neg r)|_{\varepsilon} = q \wedge \neg r$
        \item $\phi|_{2.1} = (q \wedge \neg r)|_{1} = q|_{\varepsilon} = q$
        \item $\phi|_{2.2} = (q \wedge \neg r)|_{2} = (\neg r)|_{\varepsilon} = \neg r$
        \item $\phi|_{2.2.1} = (q \wedge \neg r)|_{2.1} = (\neg r)|_{1} = r|_{\varepsilon} = r$
    \end{itemize}
    Observe que $\{\phi|_\pi \mid \pi \in pos(\phi)\} = \{\psi \mid \psi \sqsubseteq \phi\}$ é o conjunto de todas as subfórmulas de $\phi$.
\end{example}

\begin{definition}
    Definimos a \emph{polaridade da subfórmula de} $\phi$ \emph{começando na posição} $\pi$, escrito $pol(\phi,\pi)$, como o seguinte número:
    \begin{enumerate}
        \item $pol(\phi,\varepsilon) = 1$.
        \item Se $\phi|_\pi$ é da forma $\neg \phi_1$, então $pol(\phi,\pi.1) = -pol(\phi,\pi)$.
        \item Se $\phi|_\pi$ é da forma $\phi_1 \wedge ... \wedge \phi_n$, ou $\phi_1 \vee ... \vee \phi_n$, então $pol(\phi,\pi.i) = pol(\phi,\pi)$, para $i=1,...,n$.
        \item Se $\phi|_\pi$ é da forma $\phi_1 \rightarrow \phi_2$, então $pol(\phi,\pi.1) = -pol(\phi,\pi)$ e $pol(\phi,\pi.2) = pol(\phi,\pi)$.
        \item Se $\phi|_\pi$ é da forma $\phi_1 \leftrightarrow \phi_2$, então $pol(\phi,\pi.1) = pol(\phi,\pi.2) = 0$.
    \end{enumerate}
\end{definition}

\begin{example}
    Seja $\phi = (p \rightarrow q) \rightarrow \neg(p \leftrightarrow (r \vee s))$. Temos que:
    \begin{itemize}
        \item $pol(\phi,\varepsilon) = 1$
        \item $pol(\phi,1) = -1$
        \item $pol(\phi,1.1) = 1$
        \item $pol(\phi,1.2) = -1$
        \item $pol(\phi,2) = 1$
        \item $pol(\phi,2.1) = -1$
        \item $pol(\phi,2.1.1) = 0$
        \item $pol(\phi,2.1.2) = 0$
        \item $pol(\phi,2.1.2.1) = 0$
        \item $pol(\phi,2.1.2.2) = 0$
    \end{itemize}
\end{example}

\begin{definition}
	Se $\phi$ é transformada em $\psi$ por alguma regra, dizemos que esta transformação \emph{preserva equivalência} se, e somente se, a fórmula $\phi \leftrightarrow \psi$ é uma tautologia.
\end{definition}

\begin{definition}
    Dizemos que uma fórmula $\phi$ está na \emph{forma normal negada} (FNN) se, e somente se, $\phi$ não contém implicações, não contém equivalências e qualquer negação ocorre na frente de um símbolo proposicional.
\end{definition}

\begin{theorem}
    \label{fnn_theorem}
    As transformações
    \begin{enumerate}
        \item $\neg \neg \phi_1 \longmapsto \phi_1$
        \item $\neg(\phi_1 \wedge ... \wedge \phi_n) \longmapsto \neg \phi_1 \vee ... \vee \neg \phi_n$
        \item $\neg(\phi_1 \vee ... \vee \phi_n) \longmapsto \neg \phi_1 \wedge ... \wedge \neg \phi_n$
        \item $\phi_1 \rightarrow \phi_2 \longmapsto \neg \phi_1 \vee \phi_2$
        \item Se $\phi|_\pi$ é da forma $\phi_1 \leftrightarrow \phi_2$, então
        \begin{enumerate}
        	\item $\phi|_\pi \longmapsto (\phi_1 \rightarrow \phi_2) \wedge (\phi_2 \rightarrow \phi_1)$, se $pol(\phi,\pi) = 1$
        	\item $\phi|_\pi \longmapsto (\phi_1 \wedge \phi_2) \vee (\neg \phi_2 \wedge \neg \phi_1)$, se $pol(\phi,\pi) = -1$
        \end{enumerate}
    \end{enumerate}
    preservam equivalência e produzem fórmulas na FNN.
\end{theorem}

A prova segue por indução na estrutura de uma fórmula.

A transformação de equivalências dependente de polaridade do Teorema \ref{fnn_theorem} evita que tautologias difíceis de detectar apareçam nas fórmulas transformadas, como mostra o próximo exemplo. Observe que não é necessário considerar o caso em que a polaridade é zero, pois sempre podemos transformar equivalências em posições mais curtas primeiro, de modo a evitar este caso.

\begin{definition}
	Dizemos que $\phi$ é um \emph{literal} se, e somente se, $\phi \in \mathcal{P}$, ou $\phi$ é da forma $\neg p$, onde $p \in \mathcal{P}$.
	
	Dizemos que uma disjunção de literais é uma \emph{cláusula}.
	
    Dizemos que uma fórmula $\phi$ está na \emph{forma normal clausal} (FNC) se, e somente se, $\phi$ é uma conjunção de cláusulas.
\end{definition}

\begin{theorem}
    A transformação $$\phi \vee \left( \bigwedge_i \phi_i \right) \longmapsto \bigwedge_i \left( \phi \vee \phi_i \right)$$ chamada \emph{distribuição}, preserva equivalência e, se aplicada a fórmulas na FNN, produz fórmulas na FNC.
\end{theorem}

A prova segue por indução na estrutura de uma fórmula.

\begin{example}
    Considere $\phi$ da forma $\neg(\phi_1 \leftrightarrow \phi_2)$. Aplicando as transformações do Teorema \ref{fnn_theorem} à exaustão, começando pela transformação do item 5.a, e então aplicando distribuição, temos:
    \begin{equation*}
        \begin{split}
            \phi & \longmapsto \neg((\phi_1 \rightarrow \phi_2) \wedge (\phi_2 \rightarrow \phi_1)) \\
                 & \longmapsto \neg((\neg \phi_1 \vee \phi_2) \wedge (\neg \phi_2 \vee \phi_1)) \\
                 & \longmapsto \neg(\neg \phi_1 \vee \phi_2) \vee \neg(\neg \phi_2 \vee \phi_1) \\
                 & \longmapsto (\neg \neg \phi_1 \wedge \neg \phi_2) \vee (\neg \neg \phi_2 \wedge \neg \phi_1) \\
                 & \longmapsto (\phi_1 \wedge \neg \phi_2) \vee (\phi_2 \wedge \neg \phi_1) \\
                 & \longmapsto ((\phi_1 \wedge \neg \phi_2) \vee \phi_2) \wedge ((\phi_1 \wedge \neg \phi_2) \vee \neg \phi_1) \\
                 & \longmapsto (\phi_1 \vee \phi_2) \wedge (\neg \phi_2 \vee \phi_2) \wedge (\phi_1 \vee \neg \phi_1) \wedge (\neg \phi_2 \vee \neg \phi_1)
        \end{split}
    \end{equation*}
    Se $\phi_1,\phi_2 \in \mathcal{P}$, então a última fórmula já está na FNC, de modo que é fácil identificar e remover as tautologias $\neg \phi_2 \vee \phi_2$ e $\phi_1 \vee \neg \phi_1$. Caso contrário, as transformações aplicadas à exaustão transformam $\neg \phi_i$ em uma fórmula $\psi \neq \neg \phi_i$, dificultando identificar e remover as tautologias mencionadas.
    
    Considere agora uma transformação que leva em conta polaridade.
    \begin{equation*}
        \begin{split}
            \phi & \longmapsto \neg((\phi_1 \wedge \phi_2) \vee (\neg \phi_1 \wedge \neg \phi_2)) \\
                 & \longmapsto \neg(\phi_1 \wedge \phi_2) \wedge \neg(\neg \phi_1 \wedge \neg \phi_2) \\
                 & \longmapsto (\neg \phi_1 \vee \neg \phi_2) \wedge (\neg \neg \phi_1 \vee \neg \neg \phi_2) \\
                 & \longmapsto (\neg \phi_1 \vee \neg \phi_2) \wedge (\phi_1 \vee \phi_2) \\
        \end{split}
    \end{equation*}
    Neste caso, não somente o número de passos de transformação é menor, como também as tautologias indesejadas não aparecem.
\end{example}

\begin{definition}
	Sejam $\phi$ e $\psi$ fórmulas tais que $\psi \sqsubset \phi$ e $p \in \mathcal{P}$ tal que $p$ não ocorre em $\phi$. Definimos a \emph{substituição de} $\psi$ \emph{por} $p$ \emph{em} $\phi$, escrito $rep(\phi,\psi,p)$, da seguinte maneira:
	\begin{enumerate}
		\item Se $\pi \in pos(\phi)$ e $\phi|_\pi = \psi$, então $\pi \in pos(rep(\phi,\psi,p))$ e $rep(\phi,\psi,p)|_\pi = p$.
		\item Se $\pi \in pos(\phi)$ e $\phi|_\pi \neq \psi$, então:
		\begin{enumerate}
			\item Se $\pi$ é da forma $\pi_1.\pi_2$, onde $\phi|_{\pi_1} = \psi$ e $\pi_2 \in pos(\psi)$, então\break $\pi \notin pos(rep(\phi,\psi,p))$.
			\item Caso contrário, $\pi \in pos(rep(\phi,\psi,p))$ e $rep(\phi,\psi,p)|_\pi = \phi|_\pi$.
		\end{enumerate}
	\end{enumerate}
	
	Esta definição pode ser facilmente estendida para funções injetoras que mapeiam subfórmulas próprias de $\phi$ para símbolos proposicionais que não ocorrem em $\phi$. Seja $f = \{(\phi_1,p_1),...,(\phi_n,p_n)\}$ uma função deste tipo. Então, $$rep(\phi,f) = rep(rep(\phi,\phi_1,p_1),\{(\phi_2,p_2),...,(\phi_n,p_n)\})$$
\end{definition}

\begin{example}
	Seja $\phi = (p \vee q) \rightarrow (r \wedge (p \vee q) \wedge (p \wedge q))$.\\
	Então $rep(\phi,\{(p \vee q,a),(p \wedge q,b)\}) = a \rightarrow (r \wedge a \wedge b)$.
\end{example}

\begin{definition}
	Um \emph{renomeamento} de uma fórmula $\phi$ é um conjunto de subfórmulas próprias de $\phi$.
\end{definition}

\begin{theorem}
	Seja $\phi$ uma fórmula, $R = \{\phi_1,...,\phi_n\}$ um renomeamento de $\phi$ e $f : R \longmapsto \mathcal{P}$ uma função injetora tal que $f(\phi_i)$ não ocorre em $\phi$, para todo $i$. Então, a transformação $$\phi \longmapsto rep(\phi,f) \wedge (f(\phi_1) \rightarrow rep(\phi_1,f)) \wedge ... \wedge (f(\phi_n) \rightarrow rep(\phi_n,f))$$
    preserva equivalência. Com um argumento para $n=1$, esta prova segue por indução nos subconjuntos de $R$.
\end{theorem}

\begin{example}
    
\end{example}